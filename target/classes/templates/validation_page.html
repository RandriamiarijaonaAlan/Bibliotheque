<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8" />
    <title>Page de validation des demandes</title>
</head>
<body>

    <h2>Demandes à valider</h2>

    <!-- Formulaire de recherche -->
    <form th:action="@{/admin/validation}" method="get">
        <input type="text" name="search" placeholder="Recherche par nom ou livre" th:value="${search}" />
        <button type="submit">Rechercher</button>
    </form>

    <hr/>

    <table border="1">
        <thead>
            <tr>
                <th>ID</th>
                <th>Nom Adhérent</th>
                <th>Livre</th>
                <th>Date début</th>
                <th>Date fin</th>
                <th>Action</th>
            </tr>
        </thead>
        <tbody>
            <tr th:each="activity : ${activities}">
                <td th:text="${activity.id}">ID</td>
                <td th:text="${activity.nomAdherent}">Nom</td>
                <td th:text="${activity.titreLivre != null ? activity.titreLivre : 'N/A'}">Titre</td>
                <td th:text="${activity.dateDebut}">Date début</td>
                <td th:text="${activity.dateFin}">Date fin</td>
                <td>
                    <form th:if="${activity.type == 'reservation'}" 
                          th:action="@{'/admin/validation/reservation/' + ${activity.id}}" method="post">
                        <button type="submit">Valider réservation</button>
                    </form>

                    <form th:if="${activity.type == 'pret'}" 
                          th:action="@{'/admin/validation/pret/' + ${activity.id}}" method="post">
                        <button type="submit">Valider prêt</button>
                    </form>

                    <form th:if="${activity.type == 'prolongement'}" 
                          th:action="@{'/admin/validation/prolongement/' + ${activity.id}}" method="post">
                        <button type="submit">Valider prolongement</button>
                    </form>

                    <form th:if="${activity.type == 'abonnement'}" 
                          th:action="@{'/admin/validation/abonnement/' + ${activity.id}}" method="post">
                        <button type="submit">Valider abonnement</button>
                    </form>
                </td>
            </tr>
        </tbody>
    </table>

</body>
</html>
